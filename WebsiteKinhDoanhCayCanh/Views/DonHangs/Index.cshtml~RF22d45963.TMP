@model PagedList.PagedList<WebsiteKinhDoanhCayCanh.Models.LinQ.DonHang>
@using PagedList.Mvc;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<style>
    th {
        vertical-align: middle !important;
    }
</style>
<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid px-4">
            <h2 style=" text-align: center; margin-top: 20px; font-weight: bold; color: forestgreen; text-transform: capitalize;">Danh sách đơn hàng</h2>
            @*<div style="display:flex;justify-content:right;margin:10px">
            <form>
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Tìm kiếm theo tên..." aria-label="Tìm kiếm theo tên..." value="@ViewBag.Keyword" name="searchString" aria-describedby="btnNavbarSearch" />
                    <button class="btn btn-primary" id="btnNavbarSearch" type="submit"><i class="fas fa-search"></i></button>
                </div>
            </form>
        </div>*@
            <br />
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-table me-1"></i>
                    Bảng thông tin bình luận khách hàng
                </div>
                <table id="datatablesSimple" class="table table-bordered table-success">
                    <thead class="thead-dark">
                        <tr>
                            <th width="20px" class="text-center align-middle">
                                STT
                            </th>
                            <th width="40px" class="text-center align-middle">
                                Ngày đặt
                            </th>
                            <th width="30" class="text-center align-middle">
                                Ngày giao
                            </th>
                            <th width="150px" class="text-center align-middle">
                                Tên khách hàng
                            </th>
                            <th class="text-center align-middle">
                                Địa chỉ
                            </th>
                            <th width="140px" class="text-center align-middle">
                                Tổng tiền
                            </th>
                            <th width="100px" class="text-center align-middle">
                                Trạng thái giao hàng
                            </th>
                            <th width="100px" class="text-center align-middle">
                                Trạng thái thanh toán
                            </th>
                            <th width="200px" class="text-center align-middle">
                                Thao tác
                            </th>
                        </tr>
                    </thead>
                    <tbody class="table-light">
                        @{int index = 0;
                            foreach (var item in Model)
                            {
                                index++;
                <tr>
                    <td class="text-center align-middle">
                        @index
                    </td>
                    <td style="min-width:100px" class="text-center align-middle">
                        @Convert.ToDateTime(item.ngayDat).ToString("dd-MM-yyyy")
                    </td>
                    <td style="min-width:105px" class="text-center align-middle">
                        @Convert.ToDateTime(item.ngayGiao).ToString("dd-MM-yyyy")
                    </td>
                    <td class="text-center align-middle">
                        @Html.DisplayFor(modelItem => item.User.FullName)
                    </td>
                    <td class="align-middle">
                        @Html.DisplayFor(modelItem => item.User.Address)
                    </td>
                    <td class="text-center align-middle">
                        <strong style="color:red;font-weight:bold">
                            @String.Format("{0:0,0}", item.tongTien) VNĐ
                        </strong>
                    </td>
                    <td style="min-width:100px" class="checkbox text-center align-middle">
                        @if (item.trangThaiGiaoHang.ToString() == "0")
                        {
            <span style="color:orange;font-weight:bold">Đang giao</span> }
        else
        {
            if (item.trangThaiGiaoHang.ToString() == "1")
            {
            <span style="color:forestgreen;font-weight:bold">Đã giao</span> }
        else
        {
            <span style="color:red;font-weight:bold">Đã huỷ đơn</span>}
    }
                    </td>
                    <td style="min-width:130px" class="checkbox text-center align-middle">
                        @if (item.trangThaiThanhToan == true)
                        {
            <span style="color:forestgreen;font-weight:bold">Đã thanh toán</span> }
        else
        {
            <span style="color:red;font-weight:bold">Chưa thanh toán</span>}
                    </td>
                    <td class="text-center align-middle">
                        @Html.ActionLink("Chỉnh Sửa", "Edit", new { id = item.id_DH }, new { @class = "btn btn-warning" })
                        @Html.ActionLink("Chi tiết", "Details", new { id = item.id_DH }, new { @class = "btn btn-info" })
                    </td>
                </tr>
 }}
                    </tbody>

                </table>
            </div>
                <div style=" margin-bottom:50px;">
                    <div class="MenuTrang" style="display: flex; flex-direction: row; justify-content: center;">
                        Trang @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) / @Model.PageCount
                    </div>
                    <div class="MenuTrang" style="display: flex; flex-direction: row; justify-content: center;">
                        @Html.PagedListPager(Model, page => Url.Action("Index", new { page = page }))
                    </div>
                </div>
            </div>

</main>
</div>

